{
  "query": "\nCREATE TABLE IF NOT EXISTS `favorite_oracles` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `oracleId` varchar(50) NOT NULL,\n  `displayOrder` int NOT NULL DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `favorite_oracles_id` PRIMARY KEY(`id`),\n  UNIQUE KEY `unique_user_oracle` (`userId`, `oracleId`)\n);\n\nCREATE TABLE IF NOT EXISTS `scheduled_messages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `oracleId` varchar(50) NOT NULL,\n  `messageType` enum('weekly_fortune','seasonal','special','daily_fortune') NOT NULL,\n  `content` text NOT NULL,\n  `isRead` boolean NOT NULL DEFAULT false,\n  `scheduledAt` timestamp NOT NULL,\n  `deliveredAt` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `scheduled_messages_id` PRIMARY KEY(`id`),\n  INDEX `idx_user_scheduled` (`userId`, `scheduledAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `user_message_preferences` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `weeklyFortuneEnabled` boolean NOT NULL DEFAULT true,\n  `weeklyFortuneOracleId` varchar(50),\n  `seasonalMessagesEnabled` boolean NOT NULL DEFAULT true,\n  `dailyFortuneEnabled` boolean NOT NULL DEFAULT false,\n  `dailyFortuneOracleId` varchar(50),\n  `preferredDeliveryHour` int NOT NULL DEFAULT 8,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `user_message_preferences_id` PRIMARY KEY(`id`),\n  UNIQUE KEY `user_message_preferences_userId_unique` (`userId`)\n);\n\nALTER TABLE `chat_sessions` ADD COLUMN IF NOT EXISTS `category` enum('love','work','health','money','relationships','future','spiritual','other');\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user XDDKssvc1D2yUWV.0654eaeb7844 --database kufGYAjS8ccnWNwUa3NpZF --execute \nCREATE TABLE IF NOT EXISTS `favorite_oracles` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `oracleId` varchar(50) NOT NULL,\n  `displayOrder` int NOT NULL DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `favorite_oracles_id` PRIMARY KEY(`id`),\n  UNIQUE KEY `unique_user_oracle` (`userId`, `oracleId`)\n);\n\nCREATE TABLE IF NOT EXISTS `scheduled_messages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `oracleId` varchar(50) NOT NULL,\n  `messageType` enum('weekly_fortune','seasonal','special','daily_fortune') NOT NULL,\n  `content` text NOT NULL,\n  `isRead` boolean NOT NULL DEFAULT false,\n  `scheduledAt` timestamp NOT NULL,\n  `deliveredAt` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `scheduled_messages_id` PRIMARY KEY(`id`),\n  INDEX `idx_user_scheduled` (`userId`, `scheduledAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `user_message_preferences` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `weeklyFortuneEnabled` boolean NOT NULL DEFAULT true,\n  `weeklyFortuneOracleId` varchar(50),\n  `seasonalMessagesEnabled` boolean NOT NULL DEFAULT true,\n  `dailyFortuneEnabled` boolean NOT NULL DEFAULT false,\n  `dailyFortuneOracleId` varchar(50),\n  `preferredDeliveryHour` int NOT NULL DEFAULT 8,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `user_message_preferences_id` PRIMARY KEY(`id`),\n  UNIQUE KEY `user_message_preferences_userId_unique` (`userId`)\n);\n\nALTER TABLE `chat_sessions` ADD COLUMN IF NOT EXISTS `category` enum('love','work','health','money','relationships','future','spiritual','other');\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3804
}